<!doctype html>
<html class="lazyload" lang="tr">
    <head>
        <title>route-conditions · Obullo / Router.</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
                <link rel="icon" type="image/png" href="/icon.png">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Share:400|Jaldi:400,700|Fira+Mono:400,700">
        <link rel="stylesheet" href="/assets/base.css">
        <link rel="stylesheet" href="/assets/lindoc.css">
                <script>
            // Parent Elements - e.P("body") - https://gist.github.com/moqmar/0995cf6595201f7a062fb173cb4ab938
            (function(E){E.matches||(E.matches=E.matchesSelector||E.msMatchesSelector||E.webkitMatchesSelector)})(Element.prototype)
            Element.prototype.P=function(s){var e=this
            if(!s||typeof s=="number")for(var i=0;i<(s||1);i++)e=e?e.parentElement:e
            else if(typeof s=="string")while(e&&!e.matches(s))e=e.parentElement
            else while(e&&e!=s)e=e.parentElement
            return e}
        </script>
    </head>
    <body>
        <header>
            <div class="nav">
                                                <div style="text-align: left;"><a href="/tr" style="font-weight:bold;font-size:54px;">Belgeler</a> </div>
                            </div>
            <div class="language">
                <input type="checkbox" id="language-select">
                <label for="language-select"><img src="/assets/flags/tr.png"></label>
                <div class="language-select-popup" data-default-language="en">
                    <a href="/route-conditions.html"><img src="/assets/flags/en.png"></a>
                    <a href="/tr/route-conditions.html"><img src="/assets/flags/tr.png"></a>
                </div>
                <script>
                    document.getElementById("language-select").checked = false;
                    window.addEventListener("click", function(event) {
                        if (!event.target.P(".language")) document.getElementById("language-select").checked = false;
                    })
                </script>
            </div>
        </header>

        <main>
            <aside class="toc"><ul></ul></aside>
            <article>

<!-- CONTENT START -->
<h2 id="koullu-tanmlamalar">Koşullu tanımlamalar</h2>
<p>Koşullu tanımlamalar eşleşmeyi koşula bağlarlar. Koşullar bir route yada pipe nesnesi için tanımlanabilir.</p>
<h3 id="host">Host</h3>
<p>Aşağıdaki route kuralının çalışabilmesi <code>test.example.com</code> host eşleşmesine bağlıdır.</p>
<pre><code class="language-php">$collection-&gt;add('dummy',
    new Route(
        ['GET','POST'],
        '/dummy/(?&lt;name&gt;\w+)',
        'App\Controller\DefaultController:index',
        [],
        'test.example.com'
    )
);</code></pre>
<p>Aşağıdaki route kuralının çalışabilmesi  <code>(?&lt;name&gt;\w+).example.com</code> host eşleşmesine bağlıdır.</p>
<pre><code class="language-php">$collection-&gt;add('dummy',
    new Route(
        ['GET','POST'],
        '/dummy/(?&lt;name&gt;\w+)',
        'App\Controller\DefaultController:index',
        [],
        '&lt;str:name&gt;.example.com'
    )
);</code></pre>
<p>Host değeri eğer bir düzenli ifade ise <code>$router-&gt;getMatchedHosts()</code> metodu ile host eşleşmeleri alınabilir.</p>
<pre><code class="language-php">$router = new Router($collection);

if ($router-&gt;matchRequest()) {
    echo $router-&gt;getMatchedHosts()[0]; // test.example.com
    echo $router-&gt;getMatchedHosts()['name']; // test
}</code></pre>
<p>Pipe için bir örnek</p>
<pre><code class="language-php">$pipe = new Pipe('test/','App\Middleware\Dummy','&lt;str:name&gt;.example.com',['http','https']);</code></pre>
<h3 id="scheme">Scheme</h3>
<p>Bir route yada pipe kuralının son parametresi eşleşmeyi uri scheme koşuluna bağlar.</p>
<pre><code class="language-php">$collection-&gt;add('dummy',
    new Route(
        ['GET','POST'],
        '/dummy/(?&lt;name&gt;\w+)',
        'App\Controller\DefaultController:index',
        [],
        'test.example.com'
        ['http', 'https']
    )
);</code></pre>
<p>Yaml içinde,</p>
<pre><code>admin/:
    host: admin.example.com
    scheme:
        - http
        - https
    middleware:
        - App\Middleware\Auth
    dummy:
        path: /dummy/&lt;str:name&gt;
        handler: App\Controller\UserController::dummy</code></pre>
<h3 id="koullu-ykleyici">Koşullu yükleyici</h3>
<p>Herbir alt domain adına ait farklı route dosyası yükleyen bir yükleyici.</p>
<pre><code class="language-php">$subdomain = strstr($context-&gt;getHost(), '.example.com', true); // admin

$loader-&gt;load('/var/www/MyProject/'.$subdomain.'_routes.yaml');
$collection = $loader-&gt;build($collection);</code></pre>
<!-- CONTENT END -->

            </article>
            <aside class="sidebar">
                <hr>
                <h2>Obullo Components</h2>
<!--                 <h3>Links</h3> --> 
                <div class="bulletlink"><a href="http://obullo.com">Homepage</a></div>
                <div class="bulletlink"><a href="http://github.com/obullo/Router">Github Repository</a></div>
                <hr>
                <p></p>
            </aside>
            <footer>
                <hr>

<!-- FOOTER BEGIN -->


<!-- FOOTER END -->
            Website generated with <a href="http://couscous.io">Couscous</a>.
            </footer>
        </main>

        <script src="/assets/toc.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/plugins/autoloader/prism-autoloader.min.js"></script>
        <script>Prism.plugins.autoloader.languages_path = "https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/components/";</script>
        <link rel="stylesheet" href="/assets/prism.css">
        <!-- Livereload -->
        <script>
            document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
                    ':35729/livereload.js?snipver=1"></' + 'script>')
        </script>
        <!-- End Livereload -->
    </body>
</html>
